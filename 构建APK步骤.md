# æ„å»º Android APK è¯¦ç»†æ­¥éª¤

## ğŸ¯ ç›®æ ‡
å°† Cloudflare Analytics åº”ç”¨æ„å»ºä¸º Android APK å®‰è£…åŒ…

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. ç¡®ä¿é¡¹ç›®æ­£å¸¸è¿è¡Œ
```bash
cd cloudflare-analytics
npm install
npm start
```

### 2. æ³¨å†Œ Expo è´¦å·ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
è®¿é—®ï¼šhttps://expo.dev/signup
- å…è´¹æ³¨å†Œ
- è®°ä½ç”¨æˆ·åå’Œå¯†ç 

## ğŸš€ æ„å»ºæ­¥éª¤

### æ–¹æ³• A: ä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰

#### macOS/Linux:
```bash
cd cloudflare-analytics
./build-apk.sh
```

#### Windows:
```bash
cd cloudflare-analytics
build-apk.bat
```

### æ–¹æ³• B: æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤

#### æ­¥éª¤ 1: å®‰è£… EAS CLI
```bash
npm install -g eas-cli
```

#### æ­¥éª¤ 2: ç™»å½• Expo è´¦å·
```bash
cd cloudflare-analytics
eas login
```
è¾“å…¥ä½ çš„ Expo ç”¨æˆ·åå’Œå¯†ç 

#### æ­¥éª¤ 3: é…ç½®é¡¹ç›®ï¼ˆé¦–æ¬¡æ„å»ºéœ€è¦ï¼‰
```bash
eas build:configure
```
- é€‰æ‹© "All" æˆ– "Android"
- ä¼šè‡ªåŠ¨ç”Ÿæˆ `eas.json` é…ç½®æ–‡ä»¶

#### æ­¥éª¤ 4: å¼€å§‹æ„å»º
```bash
# æ„å»ºæµ‹è¯•ç‰ˆ APKï¼ˆæ¨èï¼‰
eas build --platform android --profile preview

# æˆ–è€…æ„å»ºç”Ÿäº§ç‰ˆ AABï¼ˆç”¨äº Google Playï¼‰
eas build --platform android --profile production
```

#### æ­¥éª¤ 5: ç­‰å¾…æ„å»ºå®Œæˆ
- æ„å»ºåœ¨äº‘ç«¯è¿›è¡Œ
- é€šå¸¸éœ€è¦ 10-20 åˆ†é’Ÿ
- å¯ä»¥åœ¨ç»ˆç«¯çœ‹åˆ°è¿›åº¦
- ä¹Ÿå¯ä»¥è®¿é—® https://expo.dev æŸ¥çœ‹è¯¦ç»†çŠ¶æ€

#### æ­¥éª¤ 6: ä¸‹è½½ APK
æ„å»ºå®Œæˆåï¼Œæœ‰ä¸¤ç§æ–¹å¼ä¸‹è½½ï¼š

**æ–¹å¼ 1: ä»ç»ˆç«¯ä¸‹è½½**
```bash
eas build:download
```

**æ–¹å¼ 2: ä»ç½‘é¡µä¸‹è½½**
- è®¿é—® https://expo.dev
- ç™»å½•ä½ çš„è´¦å·
- æ‰¾åˆ°æ„å»ºè®°å½•
- ç‚¹å‡»ä¸‹è½½æŒ‰é’®

## ğŸ“± å®‰è£… APK

### Android è®¾å¤‡å®‰è£…æ­¥éª¤ï¼š

1. **ä¼ è¾“ APK åˆ°æ‰‹æœº**
   - é€šè¿‡ USB è¿æ¥ç”µè„‘
   - æˆ–é€šè¿‡äº‘ç›˜/é‚®ä»¶å‘é€
   - æˆ–ç›´æ¥åœ¨æ‰‹æœºæµè§ˆå™¨ä¸‹è½½

2. **å¯ç”¨æœªçŸ¥æ¥æºå®‰è£…**
   - æ‰“å¼€"è®¾ç½®" â†’ "å®‰å…¨"
   - å¯ç”¨"æœªçŸ¥æ¥æº"æˆ–"å®‰è£…æœªçŸ¥åº”ç”¨"
   - å…è®¸ä»æ–‡ä»¶ç®¡ç†å™¨å®‰è£…

3. **å®‰è£…åº”ç”¨**
   - æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨
   - æ‰¾åˆ°ä¸‹è½½çš„ APK æ–‡ä»¶
   - ç‚¹å‡»å®‰è£…
   - ç­‰å¾…å®‰è£…å®Œæˆ

4. **æ‰“å¼€åº”ç”¨**
   - åœ¨åº”ç”¨åˆ—è¡¨æ‰¾åˆ° "Cloudflare Analytics"
   - ç‚¹å‡»æ‰“å¼€
   - è¾“å…¥ä½ çš„ Cloudflare API Token

## ğŸ”§ ä½¿ç”¨ npm è„šæœ¬

æˆ‘ä»¬å·²ç»åœ¨ `package.json` ä¸­æ·»åŠ äº†ä¾¿æ·è„šæœ¬ï¼š

```bash
# æ„å»ºæµ‹è¯•ç‰ˆ APK
npm run build:android

# æ„å»ºç”Ÿäº§ç‰ˆ AAB
npm run build:android:production

# ä¸‹è½½æ„å»ºå¥½çš„æ–‡ä»¶
npm run build:download
```

## â“ å¸¸è§é—®é¢˜

### Q1: æç¤º "No Expo account found"
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
eas login
```
è¾“å…¥ä½ çš„ Expo è´¦å·ä¿¡æ¯

### Q2: æ„å»ºå¤±è´¥ï¼Œæç¤ºä¾èµ–é—®é¢˜
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
cd cloudflare-analytics
rm -rf node_modules package-lock.json
npm install
```

### Q3: å¦‚ä½•æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼Ÿ
**è§£å†³æ–¹æ¡ˆï¼š**
- è®¿é—® https://expo.dev
- ç™»å½•è´¦å·
- ç‚¹å‡»æ„å»ºè®°å½•
- æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### Q4: APK æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ
**è§£å†³æ–¹æ¡ˆï¼š**
- ä½¿ç”¨ `eas build:download` ä¼šä¸‹è½½åˆ°å½“å‰ç›®å½•
- æˆ–ä» https://expo.dev ç½‘é¡µä¸‹è½½
- æ–‡ä»¶åç±»ä¼¼ï¼š`build-1234567890.apk`

### Q5: å¯ä»¥æ„å»º iOS ç‰ˆæœ¬å—ï¼Ÿ
**è§£å†³æ–¹æ¡ˆï¼š**
å¯ä»¥ï¼Œä½†éœ€è¦ï¼š
- Apple Developer è´¦å·ï¼ˆ$99/å¹´ï¼‰
- ä½¿ç”¨å‘½ä»¤ï¼š`eas build --platform ios`

### Q6: å…è´¹è´¦å·æœ‰é™åˆ¶å—ï¼Ÿ
**è§£å†³æ–¹æ¡ˆï¼š**
- å…è´¹è´¦å·æ¯æœˆæœ‰æ„å»ºé¢åº¦
- å¯¹äºä¸ªäººå¼€å‘å®Œå…¨å¤Ÿç”¨
- å¦‚éœ€æ›´å¤šé¢åº¦ï¼Œå¯å‡çº§ä»˜è´¹è®¡åˆ’

### Q7: å¦‚ä½•æ›´æ–°åº”ç”¨ç‰ˆæœ¬ï¼Ÿ
**è§£å†³æ–¹æ¡ˆï¼š**
1. ä¿®æ”¹ `app.json` ä¸­çš„ `version` å’Œ `versionCode`
2. é‡æ–°è¿è¡Œæ„å»ºå‘½ä»¤
3. ä¸‹è½½æ–°çš„ APK

### Q8: æ„å»ºæ—¶é—´å¤ªé•¿æ€ä¹ˆåŠï¼Ÿ
**è§£å†³æ–¹æ¡ˆï¼š**
- æ­£å¸¸æƒ…å†µ 10-20 åˆ†é’Ÿ
- å¦‚æœè¶…è¿‡ 30 åˆ†é’Ÿï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥
- å¯ä»¥å–æ¶ˆé‡æ–°æ„å»ºï¼š`Ctrl+C`

## ğŸ“Š æ„å»ºé…ç½®è¯´æ˜

### eas.json é…ç½®æ–‡ä»¶
```json
{
  "build": {
    "preview": {
      "distribution": "internal",
      "android": {
        "buildType": "apk"  // ç”Ÿæˆ APK æ–‡ä»¶
      }
    },
    "production": {
      "android": {
        "buildType": "aab"  // ç”Ÿæˆ AAB æ–‡ä»¶ï¼ˆGoogle Playï¼‰
      }
    }
  }
}
```

### app.json é…ç½®
- `version`: åº”ç”¨ç‰ˆæœ¬å·ï¼ˆå¦‚ 1.0.0ï¼‰
- `android.versionCode`: Android ç‰ˆæœ¬ä»£ç ï¼ˆæ•´æ•°ï¼‰
- `android.package`: åº”ç”¨åŒ…å
- `android.permissions`: æ‰€éœ€æƒé™

## ğŸ‰ æˆåŠŸæ ‡å¿—

æ„å»ºæˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°ï¼š
```
âœ… Build finished
ğŸ“¦ APK: https://expo.dev/artifacts/...
```

ç‚¹å‡»é“¾æ¥å³å¯ä¸‹è½½ APK æ–‡ä»¶ï¼

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ Expo æ–‡æ¡£ï¼šhttps://docs.expo.dev/build/setup/
2. æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼šhttps://expo.dev
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. ç¡®ä¿ Node.js ç‰ˆæœ¬ >= 18

## ğŸ”„ ä¸‹æ¬¡æ„å»º

ä¸‹æ¬¡æ„å»ºæ›´ç®€å•ï¼š
```bash
cd cloudflare-analytics
npm run build:android
```

å°±è¿™ä¹ˆç®€å•ï¼ğŸŠ
